package com.example.ui.authentication

import Authentication
import Screens
import androidx.compose.animation.core.FastOutSlowInEasing
import androidx.compose.animation.core.tween
import androidx.compose.animation.fadeIn
import androidx.compose.animation.fadeOut
import androidx.compose.animation.slideInHorizontally
import androidx.compose.animation.slideOutHorizontally
import androidx.hilt.navigation.compose.hiltViewModel
import androidx.navigation.NavGraphBuilder
import androidx.navigation.compose.composable
import androidx.navigation.navigation
import com.example.ui.authentication.forgetPassword.ForgetPasswordScreen
import com.example.ui.authentication.forgetPassword.NewPasswordScreen
import com.example.ui.authentication.forgetPassword.OtpScreen
import com.example.ui.authentication.loginScreen.LoginRoute
import com.example.ui.authentication.registration.RegistrationRoute


fun NavGraphBuilder.loginGraph() {
    navigation(
        route = Screens.Auth.route,
        startDestination = Authentication.Login.route
    ) {
        addLogin()
        addForgetPasswordRoute()
        addNewPasswordRoute()
        addOtpScreenRoute()
        addRegistrationScreenRoute()
    }

}


fun NavGraphBuilder.addLogin() {
    composable(
        Authentication.Login.route,
        exitTransition = {
            slideOutHorizontally(
                targetOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeOut(animationSpec = tween(200))
        },
        popEnterTransition = {
            slideInHorizontally(
                initialOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeIn(animationSpec = tween(200))
        }
    ) {
        LoginRoute(hiltViewModel())
    }

}

fun NavGraphBuilder.addForgetPasswordRoute() {

    composable(
        Authentication.ForgetPassword.route,
        exitTransition = {
            slideOutHorizontally(
                targetOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeOut(animationSpec = tween(200))
        },
        popEnterTransition = {
            slideInHorizontally(
                initialOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeIn(animationSpec = tween(200))
        }
    ) { ForgetPasswordScreen() }
}


fun NavGraphBuilder.addNewPasswordRoute() {

    composable(
        Authentication.ForgetPassword.route,
        exitTransition = {
            slideOutHorizontally(
                targetOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeOut(animationSpec = tween(200))
        },
        popEnterTransition = {
            slideInHorizontally(
                initialOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeIn(animationSpec = tween(200))
        }
    ) { NewPasswordScreen() }
}

fun NavGraphBuilder.addOtpScreenRoute() {

    composable(
        Authentication.ForgetPassword.route,
        exitTransition = {
            slideOutHorizontally(
                targetOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeOut(animationSpec = tween(200))
        },
        popEnterTransition = {
            slideInHorizontally(
                initialOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeIn(animationSpec = tween(200))
        }
    ) { OtpScreen() }
}

fun NavGraphBuilder.addRegistrationScreenRoute() {

    composable(
        Authentication.Registration.route,
        exitTransition = {
            slideOutHorizontally(
                targetOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeOut(animationSpec = tween(200))
        },
        popEnterTransition = {
            slideInHorizontally(
                initialOffsetX = { -300 },
                animationSpec = tween(
                    300,
                    easing = FastOutSlowInEasing
                )
            ) + fadeIn(animationSpec = tween(200))
        }
    ) { RegistrationRoute(hiltViewModel()) }
}